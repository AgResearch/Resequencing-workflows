fastqc
------
fastqc /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/testdata/1016456575_GTGAAA_L001_R1_001.fastq.gz -o /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test ; fastqc /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/testdata/1016456575_GTGAAA_L001_R2_001.fastq.gz -o /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test 
fastqc /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/testdata/1016456575_GTGAAA_L004_R1_001.fastq.gz -o /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test ; fastqc /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/testdata/1016456575_GTGAAA_L004_R2_001.fastq.gz -o /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test 
quadtrim
-------
tardis.py -w -c 200000 -d /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test -batonfile /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_R1_001.baton /home/mccullocha/mygit/Resequencing-workflows/quad_wrapper.sh _condition_paired_fastq_input_/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/testdata/1016456575_GTGAAA_L001_R1_001.fastq.gz _condition_paired_fastq_input_/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/testdata/1016456575_GTGAAA_L001_R2_001.fastq.gz _condition_output_quaddir _condition_fastq_product_{}/1016456575_GTGAAA_L001_R1_001.fastq-pass.fq,/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_R1_001.fastq.quadtrim.gz  _condition_fastq_product_{}/1016456575_GTGAAA_L001_R2_001.fastq-pass.fq,/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_R2_001.fastq.quadtrim.gz   _condition_fastq_product_{}/1016456575_GTGAAA_L001_RX_001.fastq-singleton.fq,/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_RX_001.singlefastq.quadtrim.gz \> _condition_text_output_/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_001.stdout
tardis.py -w -c 200000 -d /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test -batonfile /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_R1_001.baton /home/mccullocha/mygit/Resequencing-workflows/quad_wrapper.sh _condition_paired_fastq_input_/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/testdata/1016456575_GTGAAA_L004_R1_001.fastq.gz _condition_paired_fastq_input_/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/testdata/1016456575_GTGAAA_L004_R2_001.fastq.gz _condition_output_quaddir _condition_fastq_product_{}/1016456575_GTGAAA_L004_R1_001.fastq-pass.fq,/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_R1_001.fastq.quadtrim.gz  _condition_fastq_product_{}/1016456575_GTGAAA_L004_R2_001.fastq-pass.fq,/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_R2_001.fastq.quadtrim.gz   _condition_fastq_product_{}/1016456575_GTGAAA_L004_RX_001.fastq-singleton.fq,/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_RX_001.singlefastq.quadtrim.gz \> _condition_text_output_/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_001.stdout
bwa
---
tardis.py -w -d /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test bwa mem -t 4 -M -R \'@RG\\tSM:NZCPWF000001391796_test\\tPL:illumina\\tLB:NZCPWF000001391796_test\\tCN:AgResearch\\tID:1016456575_GTGAAA_L004_001\\tPU:1016456575_GTGAAA_L004_001\'  /dataset/datacache/scratch/ensembl/oar3.1/indexes/Ovis_aries.Oar_v3.1.dna_sm.toplevel.fa /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test//1016456575_GTGAAA_L004_R1_001.fastq.quadtrim.gz /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test//1016456575_GTGAAA_L004_R2_001.fastq.quadtrim.gz \| samtools view -bS - \> _condition_wait_output_/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_001.bam  
tardis.py -w -d /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test bwa mem -t 4 -M -R \'@RG\\tSM:NZCPWF000001391796_test\\tPL:illumina\\tLB:NZCPWF000001391796_test\\tCN:AgResearch\\tID:1016456575_GTGAAA_L004_RX_001\\tPU:1016456575_GTGAAA_L004_RX_001\' /dataset/datacache/scratch/ensembl/oar3.1/indexes/Ovis_aries.Oar_v3.1.dna_sm.toplevel.fa /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_RX_001.singlefastq.quadtrim.gz \| samtools view -bS - \> _condition_wait_output_/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_RX_001.singlesbam 
tardis.py -w -d /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test bwa mem -t 4 -M -R \'@RG\\tSM:NZCPWF000001391796_test\\tPL:illumina\\tLB:NZCPWF000001391796_test\\tCN:AgResearch\\tID:1016456575_GTGAAA_L001_001\\tPU:1016456575_GTGAAA_L001_001\'  /dataset/datacache/scratch/ensembl/oar3.1/indexes/Ovis_aries.Oar_v3.1.dna_sm.toplevel.fa /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test//1016456575_GTGAAA_L001_R1_001.fastq.quadtrim.gz /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test//1016456575_GTGAAA_L001_R2_001.fastq.quadtrim.gz \| samtools view -bS - \> _condition_wait_output_/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_001.bam  
tardis.py -w -d /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test bwa mem -t 4 -M -R \'@RG\\tSM:NZCPWF000001391796_test\\tPL:illumina\\tLB:NZCPWF000001391796_test\\tCN:AgResearch\\tID:1016456575_GTGAAA_L001_RX_001\\tPU:1016456575_GTGAAA_L001_RX_001\' /dataset/datacache/scratch/ensembl/oar3.1/indexes/Ovis_aries.Oar_v3.1.dna_sm.toplevel.fa /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_RX_001.singlefastq.quadtrim.gz \| samtools view -bS - \> _condition_wait_output_/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_RX_001.singlesbam 
bamstats
--------
bam filtering
-------------
/dataset/AG_1000_bulls/active/bin/sambamba view -t8 -f bam -F "mapping_quality >=20" /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_RX_001.singlesbam -o /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_RX_001.singlesfilteredbam 
/dataset/AG_1000_bulls/active/bin/sambamba view -t8 -f bam -F "mapping_quality >=20" /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_RX_001.singlesbam -o /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_RX_001.singlesfilteredbam 
/dataset/AG_1000_bulls/active/bin/sambamba view -t8 -f bam -F "mapping_quality >=20" /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_001.bam -o /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_001.filteredbam 
/dataset/AG_1000_bulls/active/bin/sambamba view -t8 -f bam -F "mapping_quality >=20" /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_001.bam -o /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_001.filteredbam 
bam sorting
-----------
/dataset/AG_1000_bulls/active/bin/sambamba sort --tmpdir=/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_testtmp -t 8 -m 10G /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_RX_001.singlesfilteredbam  -o /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_RX_001.singlessortedbam
/dataset/AG_1000_bulls/active/bin/sambamba sort --tmpdir=/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_testtmp -t 8 -m 10G /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_RX_001.singlesfilteredbam  -o /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_RX_001.singlessortedbam
/dataset/AG_1000_bulls/active/bin/sambamba sort --tmpdir=/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_testtmp -t 8 -m 10G /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_001.filteredbam  -o /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_001.sortedbam
/dataset/AG_1000_bulls/active/bin/sambamba sort --tmpdir=/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_testtmp -t 8 -m 10G /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_001.filteredbam  -o /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_001.sortedbam
bam deduplication
-----------------
samtools rmdup  /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/NZCPWF000001391796_test.samplemergedbam_with_duplicates /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/NZCPWF000001391796_test.samplemergedbam_no_duplicates
bam merging
-----------
/dataset/AG_1000_bulls/active/bin/sambamba merge -t 8  /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_001.lanemergedbam_with_duplicates /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_001.sortedbam /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_RX_001.singlessortedbam
/dataset/AG_1000_bulls/active/bin/sambamba merge -t 8  /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_001.lanemergedbam_with_duplicates /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_001.sortedbam /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_RX_001.singlessortedbam
/dataset/AG_1000_bulls/active/bin/sambamba merge -t 8  /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/NZCPWF000001391796_test.samplemergedbam_with_duplicates /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_001.lanemergedbam /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_001.lanemergedbam
gatk : intervals
----------------
/usr/bin/java -Xmx4g -Djava.io.tmpdir=/dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_testtmp -jar /dataset/AFC_dairy_cows/archive/GenomeAnalysisTKLite-2.3-9-gdcdccbb/GenomeAnalysisTKLite.jar -T RealignerTargetCreator -nt 16 -R /dataset/datacache/scratch/ensembl/oar3.1/indexes/Ovis_aries.Oar_v3.1.dna_sm.toplevel.fa -I /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/NZCPWF000001391796_test_samplemerged.bam -o /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/NZCPWF000001391796_test.intervals -S LENIENT -rbs 5000000
gatk : realigner
----------------
vcf
---
gatk : coverage
---------------
file linking
------------
ln -fs /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_001.lanemergedbam_with_duplicates /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_001.lanemergedbam 
ln -fs /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_001.lanemergedbam_with_duplicates /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_001_merged.bam
ln -fs /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_001.lanemergedbam_with_duplicates /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_001.lanemergedbam 
ln -fs /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_001.lanemergedbam_with_duplicates /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_001_merged.bam
ln -fs /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/NZCPWF000001391796_test.samplemergedbam_no_duplicates /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/NZCPWF000001391796_test.samplemergedbam
ln -fs /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/NZCPWF000001391796_test.samplemergedbam_no_duplicates /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/NZCPWF000001391796_test_samplemerged.bam
waiting
-------
while [ ! -f /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L001_R1_001.baton ]; do  sleep 1; done 
while [ ! -f /dataset/AG_1000_sheep/scratch/PHUAS_processing_052015/NZCPWF000001391796_test/1016456575_GTGAAA_L004_R1_001.baton ]; do  sleep 1; done 
